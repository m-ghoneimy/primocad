<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .container {
            background: white;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            
            margin: 0 auto;
            margin-bottom: 1rem;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
            font-size: 24px;
            font-weight: 600;
        }

        .scrollable-content {
            overflow-y: auto;
            flex: 1;
        }

        .section {
            padding: 24px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #555;
            margin-bottom: 6px;
        }

        input, select {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
        }

        input:disabled, select:disabled {
            background-color: #f5f5f5;
            cursor: not-allowed;
        }

        .add-item-btn {
            width: 100%;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: #27ae60;
            color: white;
            margin-top: 16px;
        }

        .add-item-btn:hover:not(:disabled) {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        }

        .add-item-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .item-card {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            margin: 16px;
            border: 2px solid #e0e0e0;
        }

        .item-header {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            margin-bottom: 16px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .delete-item-btn {
            width: 100%;
            padding: 10px 24px;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: #e74c3c;
            color: white;
            margin-top: 12px;
        }

        .delete-item-btn:hover:not(:disabled) {
            background: #c0392b;
        }

        .delete-item-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            padding: 24px;
            border-top: 2px solid #f0f0f0;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-calculate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-calculate:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-edit {
            background: #f0f0f0;
            color: #666;
        }

        .btn-edit:hover:not(:disabled) {
            background: #e0e0e0;
        }

        .btn-help {
            background: #3498db;
            color: white;
        }

        .btn-help:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
        }

        .result-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 36px;
            font-weight: 700;
        }

        .summary-section {
            padding: 24px;
            background: #f9f9f9;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 500;
            color: #666;
        }

        .summary-value {
            font-weight: 600;
            color: #333;
        }

        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }

        .error-message {
            display: none;
        }

        input.error, select.error {
            border-color: #e74c3c;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #999;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        @media (max-width: 600px) {
            .container {
                max-width: 100%;
            }

            .header {
                font-size: 20px;
                padding: 20px;
            }

            .section {
                padding: 20px;
            }

            .button-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <title>Cost Calculator</title>
</head>
<body>
    <!-- navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon"><img src="assets/logo/primocad logo 2024 - 32 white.png"></div>
                Primocad
            </a>
            <ul class="nav-links">
                <li><a href="products.html">Products</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <a href="products.html#calculators" class="nav-cta">Calculators</a>
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!--main-->
    <main>

    <!-- calculator -->
    <div class="container">
        <div class="header">
            Cost Calculator
        </div>

        <div class="scrollable-content">
            <!-- Global Settings -->
            <div class="section">
                <div class="form-group">
                    <label>Money Unit</label>
                    <select id="moneyUnit">
                        <option value="USD">USD</option>
                        <option value="EUR">EUR</option>
                        <option value="Custom">Custom</option>
                    </select>
                </div>
                <div class="form-group" id="customMoneyGroup" style="display: none;">
                    <label>Custom Money Unit</label>
                    <input type="text" id="customMoneyUnit" placeholder="Enter custom unit (e.g., GBP, JPY, AED)">
                </div>
            </div>

            <!-- Items Container -->
            <div id="itemsContainer">
                <!-- Empty state -->
                <div class="empty-state" id="emptyState">
                    <div class="empty-state-icon">ðŸ“‹</div>
                    <p>No items yet. Click "Add Item" to get started.</p>
                </div>
            </div>

            <!-- Summary Section -->
            <div class="summary-section" id="summarySection" style="display: none;">
                <div class="section-title">Summary</div>
                <div id="summaryItems"></div>
            </div>

            <!-- Result Section -->
            <div class="result-section" id="resultSection" style="display: none;">
                <div class="result-label">Calculated Total Cost</div>
                <div class="result-value" id="resultValue">-</div>
            </div>
        </div>

        <!-- Add Item -->
        <div class="section">
            <button class="add-item-btn" id="addItemBtn">Add Item</button>
            <div class="error-message" id="itemError">Please add at least one item before calculating</div>
        </div>

        <!-- Other Buttons -->
        <div class="button-group">
            <button class="btn-calculate" id="calculateBtn">Calculate</button>
            <button class="btn-edit" id="editBtn" disabled>Edit</button>
            <button class="btn-help" onclick="window.location.href='cost-calculator-docs.html'">Help</button>
        </div>
    </div>

    </main>

    <!-- footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Primocad</h3>
                <p>Weâ€™re all about making your workflow a breeze. Weâ€™re here to help you conquer technical challenges and get things done â€“ with a smile on your face.</p>
            </div>

            <div class="footer-column">
                <h3>Discover</h3>
                <ul class="footer-links">
                    <li><a href="arrange-docs.html">Arrange app documentation</a></li>
                    <li><a href="zwizard-docs.html">Z-Wizard app documentation</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="products.html">Products</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
                
            <!---
            <div class="footer-column">
                <h3>Social Links</h3>
                <div class="social-links">
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                </div>
            </div>
            -->
        </div>
        
        <div class="footer-bottom">
            <p>&copy; <span id="year"></span> Primocad</p>
        </div>
    </footer>

    <script src="assets/js/script.js"></script>

    <script>
        // State
        let items = [];
        let itemIdCounter = 0;
        const MAX_ITEMS = 20;

        // DOM elements
        const moneyUnitSelect = document.getElementById('moneyUnit');
        const customMoneyUnit = document.getElementById('customMoneyUnit');
        const customMoneyGroup = document.getElementById('customMoneyGroup');
        const addItemBtn = document.getElementById('addItemBtn');
        const itemsContainer = document.getElementById('itemsContainer');
        const emptyState = document.getElementById('emptyState');
        const calculateBtn = document.getElementById('calculateBtn');
        const editBtn = document.getElementById('editBtn');
        const resultSection = document.getElementById('resultSection');
        const resultValue = document.getElementById('resultValue');
        const summarySection = document.getElementById('summarySection');
        const summaryItems = document.getElementById('summaryItems');

        // Get money unit
        function getMoneyUnit() {
            if (moneyUnitSelect.value === 'Custom') {
                return customMoneyUnit.value.trim() || 'USD';
            }
            return moneyUnitSelect.value;
        }

        // Toggle custom money unit
        function toggleCustomMoneyUnit() {
            if (moneyUnitSelect.value === 'Custom') {
                customMoneyGroup.style.display = 'block';
            } else {
                customMoneyGroup.style.display = 'none';
            }
        }

        moneyUnitSelect.addEventListener('change', toggleCustomMoneyUnit);

        // Add item
        function addItem() {
            if (items.length >= MAX_ITEMS) {
                alert(`Maximum of ${MAX_ITEMS} items allowed.`);
                return;
            }

            document.getElementById('itemError').style.display = "none";

            const itemId = itemIdCounter++;
            items.push(itemId);

            const itemCard = document.createElement('div');
            itemCard.className = 'item-card';
            itemCard.id = `item-${itemId}`;
            itemCard.innerHTML = `
                <div class="item-header">Item (${items.length})</div>
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="name-${itemId}" placeholder="Item name or code">
                </div>
                <div class="form-group">
                    <label>Cost Type</label>
                    <select id="costType-${itemId}" onchange="toggleCostFields(${itemId})">
                        <option value="time-dependent">Time-dependent</option>
                        <option value="fixed">Fixed</option>
                    </select>
                </div>
                <div class="form-group" id="costRateGroup-${itemId}">
                    <label>Cost Rate</label>
                    <input type="number" id="costRate-${itemId}" min="0.01" step="0.01">
                </div>
                <div class="form-group" id="durationGroup-${itemId}">
                    <label>Duration</label>
                    <input type="number" id="duration-${itemId}" min="0.01" step="0.01">
                </div>
                <div class="form-group" id="costValueGroup-${itemId}" style="display: none;">
                    <label>Cost Value</label>
                    <input type="number" id="costValue-${itemId}" min="0.01" step="0.01">
                </div>
                <div class="form-group">
                    <label>Multiplier</label>
                    <input type="number" id="multiplier-${itemId}" value="1" min="0.01" step="0.01">
                </div>
                <button class="delete-item-btn" onclick="deleteItem(${itemId})">Delete Item</button>
            `;

            if (emptyState.style.display !== 'none') {
                emptyState.style.display = 'none';
            }

            itemsContainer.appendChild(itemCard);
            updateAddItemButton();
        }

        // Toggle cost fields based on cost type
        window.toggleCostFields = function(itemId) {
            const costType = document.getElementById(`costType-${itemId}`).value;
            const costRateGroup = document.getElementById(`costRateGroup-${itemId}`);
            const durationGroup = document.getElementById(`durationGroup-${itemId}`);
            const costValueGroup = document.getElementById(`costValueGroup-${itemId}`);

            if (costType === 'time-dependent') {
                costRateGroup.style.display = 'block';
                durationGroup.style.display = 'block';
                costValueGroup.style.display = 'none';
            } else {
                costRateGroup.style.display = 'none';
                durationGroup.style.display = 'none';
                costValueGroup.style.display = 'block';
            }
        };

        // Delete item
        window.deleteItem = function(itemId) {
            const index = items.indexOf(itemId);
            if (index > -1) {
                items.splice(index, 1);
            }

            const itemCard = document.getElementById(`item-${itemId}`);
            itemCard.remove();

            renumberItems();
            updateAddItemButton();

            if (items.length === 0) {
                emptyState.style.display = 'block';
            }
        };

        // Renumber items
        function renumberItems() {
            items.forEach((itemId, index) => {
                const itemCard = document.getElementById(`item-${itemId}`);
                const header = itemCard.querySelector('.item-header');
                header.textContent = `Item (${index + 1})`;
            });
        }

        // Update add item button state
        function updateAddItemButton() {
            if (items.length >= MAX_ITEMS) {
                addItemBtn.disabled = true;
            } else {
                addItemBtn.disabled = false;
            }
        }

        // Calculate cost
        function calculateCost() {
            if (items.length === 0) {
                document.getElementById('itemError').style.display = "block";
                return;
            }

            let totalCost = 0;
            const itemCosts = [];
            const moneyUnit = getMoneyUnit();

            // Calculate each item
            for (const itemId of items) {
                const name = document.getElementById(`name-${itemId}`).value || `Item ${items.indexOf(itemId) + 1}`;
                const costType = document.getElementById(`costType-${itemId}`).value;
                const multiplier = parseFloat(document.getElementById(`multiplier-${itemId}`).value) || 0;

                let itemCost = 0;

                if (costType === 'time-dependent') {
                    const costRate = parseFloat(document.getElementById(`costRate-${itemId}`).value) || 0;
                    const duration = parseFloat(document.getElementById(`duration-${itemId}`).value) || 0;
                    itemCost = costRate * duration * multiplier;
                } else {
                    const costValue = parseFloat(document.getElementById(`costValue-${itemId}`).value) || 0;
                    itemCost = costValue * multiplier;
                }

                totalCost += itemCost;
                itemCosts.push({ name, cost: itemCost });
            }

            // Display result
            resultValue.textContent = `${totalCost.toFixed(2)} ${moneyUnit}`;
            resultSection.style.display = 'block';

            // Display summary
            summaryItems.innerHTML = '';
            itemCosts.forEach(item => {
                const summaryItem = document.createElement('div');
                summaryItem.className = 'summary-item';
                summaryItem.innerHTML = `
                    <span class="summary-label">${item.name}:</span>
                    <span class="summary-value">${item.cost.toFixed(2)} ${moneyUnit}</span>
                `;
                summaryItems.appendChild(summaryItem);
            });
            summarySection.style.display = 'block';

            // Disable inputs and buttons
            disableAllInputs();
            calculateBtn.disabled = true;
            editBtn.disabled = false;
        }

        // Edit data
        function editData() {
            enableAllInputs();
            calculateBtn.disabled = false;
            editBtn.disabled = true;
            resultSection.style.display = 'none';
            summarySection.style.display = 'none';
        }

        // Disable all inputs
        function disableAllInputs() {
            moneyUnitSelect.disabled = true;
            customMoneyUnit.disabled = true;
            addItemBtn.disabled = true;

            items.forEach(itemId => {
                document.getElementById(`name-${itemId}`).disabled = true;
                document.getElementById(`costType-${itemId}`).disabled = true;
                document.getElementById(`multiplier-${itemId}`).disabled = true;

                const costRate = document.getElementById(`costRate-${itemId}`);
                if (costRate) costRate.disabled = true;

                const duration = document.getElementById(`duration-${itemId}`);
                if (duration) duration.disabled = true;

                const costValue = document.getElementById(`costValue-${itemId}`);
                if (costValue) costValue.disabled = true;

                const deleteBtn = document.querySelector(`#item-${itemId} .delete-item-btn`);
                if (deleteBtn) deleteBtn.disabled = true;
            });
        }

        // Enable all inputs
        function enableAllInputs() {
            moneyUnitSelect.disabled = false;
            customMoneyUnit.disabled = false;
            updateAddItemButton();

            items.forEach(itemId => {
                document.getElementById(`name-${itemId}`).disabled = false;
                document.getElementById(`costType-${itemId}`).disabled = false;
                document.getElementById(`multiplier-${itemId}`).disabled = false;

                const costRate = document.getElementById(`costRate-${itemId}`);
                if (costRate) costRate.disabled = false;

                const duration = document.getElementById(`duration-${itemId}`);
                if (duration) duration.disabled = false;

                const costValue = document.getElementById(`costValue-${itemId}`);
                if (costValue) costValue.disabled = false;

                const deleteBtn = document.querySelector(`#item-${itemId} .delete-item-btn`);
                if (deleteBtn) deleteBtn.disabled = false;
            });
        }

        // Event listeners
        addItemBtn.addEventListener('click', addItem);
        calculateBtn.addEventListener('click', calculateCost);
        editBtn.addEventListener('click', editData);
    </script>
</body>
</html>