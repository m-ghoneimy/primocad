<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/style.css">
    <style>
        .container {
            background: white;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            max-width: 500px;

            margin: 0 auto;
            margin-bottom: 1rem;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
            font-size: 24px;
            font-weight: 600;
        }

        .section {
            padding: 24px;
            border-bottom: 2px solid #f0f0f0;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #333;
            margin-bottom: 16px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            font-weight: 500;
            color: #555;
            margin-bottom: 6px;
        }

        input, select, textarea {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .button-group {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 12px;
            padding: 24px;
        }

        @media (max-width: 600px) {
            .button-group {
                grid-template-columns: 1fr;
            }
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-calculate {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-calculate:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-edit {
            background: #f0f0f0;
            color: #666;
        }

        .btn-edit:hover:not(:disabled) {
            background: #e0e0e0;
        }

        .btn-help {
            background: #3498db;
            color: white;
        }

        .btn-help:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .result-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 24px;
            text-align: center;
        }

        .result-label {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }

        .result-value {
            font-size: 36px;
            font-weight: 700;
        }

        .summary-section {
            padding: 24px;
            background: #f9f9f9;
        }

        .summary-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .summary-item:last-child {
            border-bottom: none;
        }

        .summary-label {
            font-weight: 500;
            color: #666;
        }

        .summary-value {
            font-weight: 600;
            color: #333;
        }

        .error-message {
            color: #e74c3c;
            font-size: 12px;
            margin-top: 4px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        input.error, select.error {
            border-color: #e74c3c;
        }

        @media (max-width: 600px) {
            .container {
                max-width: 100%;
                margin-left: 1rem;
                margin-right: 1rem;
            }

            .header {
                font-size: 20px;
                padding: 20px;
            }

            .section {
                padding: 20px;
            }
        }
    </style>
    <title>Duration Calculator</title>
</head>
<body>
    <!-- navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <div class="logo-icon"><img src="assets/logo/primocad logo 2024 - 32 white.png"></div>
                Primocad
            </a>
            <ul class="nav-links">
                <li><a href="products.html">Products</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
            <a href="products.html#calculators" class="nav-cta">Calculators</a>
            <button class="mobile-menu-btn" id="mobile-menu-btn">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <!--main-->
    <main>
        <!-- calculator -->
        <div class="container">
            <div class="header">
                Duration Calculator
            </div>

            <!-- global settings -->
            <div class="section">
                <div class="section-title">
                    General Settings
                </div>
                <div class="form-group">
                    <label>
                        Quantity Unit
                    </label>
                    <select id="quantityUnit">
                        <option value="Cubic Meter">Cubic Meter (m³)</option>
                        <option value="Square Meter">Square Meter (m²)</option>
                        <option value="Meter">Meter (m)</option>
                        <option value="Ton">Ton</option>
                        <option value="Kilogram">Kilogram</option>
                        <option value="Custom">Custom</option>
                    </select>
                </div>
                <div class="form-group" id="customQuantityGroup" style="display: none;">
                    <label>
                        Custom Quantity Unit
                    </label>
                    <input type="text" id="customQuantityUnit" placeholder="Enter custom unit (e.g., kg, pieces)">
                </div>
                <div class="form-group">
                    <label>
                        Time Unit
                    </label>
                    <select id="timeUnit">
                        <option value="Hour">Hour</option>
                        <option value="Day" selected>Day</option>
                        <option value="Week">Week</option>
                        <option value="Month">Month</option>
                        <option value="Custom">Custom</option>
                    </select>
                </div>
                <div class="form-group" id="customTimeGroup" style="display: none;">
                    <label>
                        Custom Time Unit
                    </label>
                    <input type="text" id="customTimeUnit" placeholder="Enter custom unit (e.g., shift, cycle)">
                </div>
                <div class="form-group">
                    <label>
                        Decimals
                    </label>
                    <select id="decimals">
                        <option value="0">0</option>
                        <option value="1">1</option>
                        <option value="2" selected>2</option>
                    </select>
                </div>
            </div>

            <!-- activity data -->
            <div class="section">
                <div class="section-title">
                    Activity Data
                </div>
                <div class="form-group">
                    <label>
                        Name
                    </label>
                    <input type="text" id="activityName" placeholder="Activity name or code">
                </div>
                <div class="form-group">
                    <label>
                        <span id="productionQuantityLabel">Production Quantity</span>
                    </label>
                    <input type="number" id="productionQuantity" min="0.01" step="0.01">
                    <div class="error-message" id="quantityError">Please enter a valid positive number</div>
                </div>
                <div class="form-group">
                    <label>
                        <span id="producerRateLabel">Producer Rate</span>
                    </label>
                    <input type="number" id="producerRate" min="0.01" step="0.01">
                    <div class="error-message" id="rateError">Please enter a valid positive number</div>
                </div>
                <div class="form-group">
                    <label>
                        Number of Producers
                    </label>
                    <input type="number" id="numProducers" value="1" min="0.01" step="0.01">
                    <div class="error-message" id="producersError">Please enter a valid positive integer</div>
                </div>
                <div class="form-group">
                    <label>
                        Efficiency (0.01 - 1.00)
                    </label>
                    <input type="number" id="efficiency" value="1" min="0.01" max="1" step="0.01">
                    <div class="error-message" id="efficiencyError">Efficiency must be between 0.01 and 1.00</div>
                </div>
            </div>

            <!-- buttons -->
            <div class="button-group">
                <button class="btn-calculate" id="calculateBtn">Calculate</button>
                <button class="btn-edit" id="editBtn" disabled>Edit</button>
                <button class="btn-help" onclick="window.location.href='duration-calculator-docs.html'">Help</button>
            </div>

            <!-- summary -->
            <div class="summary-section" id="summarySection" style="display: none;">
                <div class="section-title">Summary</div>
                <div class="summary-item">
                    <span class="summary-label">Activity Name:</span>
                    <span class="summary-value" id="summaryName">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Production Quantity:</span>
                    <span class="summary-value" id="summaryQuantity">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Producer Rate:</span>
                    <span class="summary-value" id="summaryRate">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Number of Producers:</span>
                    <span class="summary-value" id="summaryProducers">-</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Efficiency:</span>
                    <span class="summary-value" id="summaryEfficiency">-</span>
                </div>
            </div>

            <!-- calculated duration -->
            <div class="result-section" id="resultSection" style="display: none;">
                <div class="result-label">Calculated Duration</div>
                <div class="result-value" id="resultValue">-</div>
            </div>
        </div>
    </main>

    <!-- footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-column">
                <h3>Primocad</h3>
                <p>We’re all about making your workflow a breeze. We’re here to help you conquer technical challenges and get things done – with a smile on your face.</p>
            </div>

            <div class="footer-column">
                <h3>Discover</h3>
                <ul class="footer-links">
                    <li><a href="arrange-docs.html">Arrange app documentation</a></li>
                    <li><a href="zwizard-docs.html">Z-Wizard app documentation</a></li>
                </ul>
            </div>

            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="products.html">Products</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="contact.html">Contact</a></li>
                </ul>
            </div>
                
            <!---
            <div class="footer-column">
                <h3>Social Links</h3>
                <div class="social-links">
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                    <a href="#" class="social-link"></a>
                </div>
            </div>
            -->
        </div>
        
        <div class="footer-bottom">
            <p>&copy; <span id="year"></span> Primocad</p>
        </div>
    </footer>

    <script src="assets/js/script.js"></script>
    
    <script>
        // get all dom elements
        const calculateBtn = document.getElementById('calculateBtn');
        const editBtn = document.getElementById('editBtn');
        const resultSection = document.getElementById('resultSection');
        const summarySection = document.getElementById('summarySection');
        const resultValue = document.getElementById('resultValue');

        // input fields
        const inputs = {
            quantityUnit: document.getElementById('quantityUnit'),
            timeUnit: document.getElementById('timeUnit'),
            decimals: document.getElementById('decimals'),
            activityName: document.getElementById('activityName'),
            productionQuantity: document.getElementById('productionQuantity'),
            producerRate: document.getElementById('producerRate'),
            numProducers: document.getElementById('numProducers'),
            efficiency: document.getElementById('efficiency'),
            customQuantityUnit: document.getElementById('customQuantityUnit'),
            customTimeUnit: document.getElementById('customTimeUnit')
        };

        // custom unit groups
        const customQuantityGroup = document.getElementById('customQuantityGroup');
        const customTimeGroup = document.getElementById('customTimeGroup');

        // label elements
        const productionQuantityLabel = document.getElementById('productionQuantityLabel');
        const producerRateLabel = document.getElementById('producerRateLabel');

        // error message elements
        const errors = {
            quantity: document.getElementById('quantityError'),
            rate: document.getElementById('rateError'),
            producers: document.getElementById('producersError'),
            efficiency: document.getElementById('efficiencyError')
        };

        // get current quantity unit (handles custom units)
        function getQuantityUnit() {
            if (inputs.quantityUnit.value === 'Custom') {
                return inputs.customQuantityUnit.value.trim() || 'unit';
            }
            return inputs.quantityUnit.value;
        }

        // get quantity unit label (short form for display)
        function getQuantityUnitLabel() {
            const unit = inputs.quantityUnit.value;
            if (unit === 'Custom') {
                return inputs.customQuantityUnit.value.trim() || 'unit';
            }
            const labels = {
                'Cubic Meter': 'm³',
                'Square Meter': 'm²',
                'Meter': 'm',
                'Ton': 'ton',
                'Kilogram': 'kg'
            };
            return labels[unit] || unit;
        }

        // get current time unit (handles custom units)
        function getTimeUnit() {
            if (inputs.timeUnit.value === 'Custom') {
                return inputs.customTimeUnit.value.trim() || 'period';
            }
            return inputs.timeUnit.value;
        }

        // get time unit label (lowercase for display)
        function getTimeUnitLabel() {
            return getTimeUnit().toLowerCase();
        }

        // update all dynamic labels
        function updateLabels() {
            const quantityUnit = getQuantityUnit();
            const timeUnit = getTimeUnit();
            
            // update production quantity label
            productionQuantityLabel.textContent = `Production Quantity (${getQuantityUnitLabel()})`;
            
            // update producer rate label
            producerRateLabel.textContent = `Producer Rate (${getQuantityUnitLabel()}/${getTimeUnitLabel()} per producer)`;
        }

        // toggle custom quantity unit input
        function toggleCustomQuantityUnit() {
            if (inputs.quantityUnit.value === 'Custom') {
                customQuantityGroup.style.display = 'block';
            } else {
                customQuantityGroup.style.display = 'none';
            }
            updateLabels();
        }

        // toggle custom time unit input
        function toggleCustomTimeUnit() {
            if (inputs.timeUnit.value === 'Custom') {
                customTimeGroup.style.display = 'block';
            } else {
                customTimeGroup.style.display = 'none';
            }
            updateLabels();
        }

        // initialize labels on page load
        updateLabels();

        // validation function
        function validateInputs() {
            let isValid = true;

            // clear previous errors
            Object.values(errors).forEach(error => error.classList.remove('show'));
            Object.values(inputs).forEach(input => {
                if (input.classList) input.classList.remove('error');
            });

            // validate production quantity
            const quantity = parseFloat(inputs.productionQuantity.value);
            if (isNaN(quantity) || quantity < 0.01) {
                errors.quantity.classList.add('show');
                inputs.productionQuantity.classList.add('error');
                isValid = false;
            }

            // validate producer rate
            const rate = parseFloat(inputs.producerRate.value);
            if (isNaN(rate) || rate < 0.01) {
                errors.rate.classList.add('show');
                inputs.producerRate.classList.add('error');
                isValid = false;
            }

            // validate number of producers
            const producers = parseFloat(inputs.numProducers.value);
            if (isNaN(producers) || producers < 0.01) {
                errors.producers.classList.add('show');
                inputs.numProducers.classList.add('error');
                isValid = false;
            }

            // validate efficiency
            const efficiency = parseFloat(inputs.efficiency.value);
            if (isNaN(efficiency) || efficiency < 0.01 || efficiency > 1) {
                errors.efficiency.classList.add('show');
                inputs.efficiency.classList.add('error');
                isValid = false;
            }

            return isValid;
        }

        // calculate duration
        function calculateDuration() {
            if (!validateInputs()) {
                return;
            }

            // get values
            const quantity = parseFloat(inputs.productionQuantity.value);
            const rate = parseFloat(inputs.producerRate.value);
            const producers = parseFloat(inputs.numProducers.value);
            const efficiency = parseFloat(inputs.efficiency.value);
            const decimals = parseInt(inputs.decimals.value);

            // calculate duration with selected decimal places
            const duration = quantity / (rate * producers * efficiency);

            // round duration based on decimal setting
            let roundedDuration;
            if (decimals === 0) {
                // always round up (ceiling) when decimals = 0
                roundedDuration = Math.ceil(duration);
            } else {
                roundedDuration = parseFloat(duration.toFixed(decimals));
            }

            // get unit labels
            const quantityUnitLabel = getQuantityUnitLabel();
            const timeUnitLabel = getTimeUnitLabel();

            // display result with selected decimal precision
            const displayDuration = roundedDuration.toFixed(decimals);
            resultValue.textContent = `${displayDuration} ${timeUnitLabel}${parseFloat(displayDuration) !== 1 ? 's' : ''}`;
            resultSection.style.display = 'block';

            // update summary - always use 2 decimal places for inputs
            document.getElementById('summaryName').textContent = inputs.activityName.value || 'N/A';
            document.getElementById('summaryQuantity').textContent = `${quantity.toFixed(2)} ${quantityUnitLabel}`;
            document.getElementById('summaryRate').textContent = `${rate.toFixed(2)} ${quantityUnitLabel}/${timeUnitLabel}`;
            document.getElementById('summaryProducers').textContent = producers.toFixed(2);
            document.getElementById('summaryEfficiency').textContent = `${(efficiency * 100).toFixed(2)}%`;
            summarySection.style.display = 'block';

            // toggle buttons
            calculateBtn.disabled = true;
            editBtn.disabled = false;

            // disable inputs
            Object.values(inputs).forEach(input => input.disabled = true);
        }

        // edit data
        function editData() {
            // hide results
            resultSection.style.display = 'none';
            summarySection.style.display = 'none';

            // enable inputs
            Object.values(inputs).forEach(input => input.disabled = false);

            // toggle buttons
            calculateBtn.disabled = false;
            editBtn.disabled = true;

            // clear errors
            Object.values(errors).forEach(error => error.classList.remove('show'));
            Object.values(inputs).forEach(input => {
                if (input.classList) input.classList.remove('error');
            });
        }

        // event listeners
        calculateBtn.addEventListener('click', calculateDuration);
        editBtn.addEventListener('click', editData);

        // listen for unit changes
        inputs.quantityUnit.addEventListener('change', toggleCustomQuantityUnit);
        inputs.timeUnit.addEventListener('change', toggleCustomTimeUnit);
        
        // update labels when custom units are typed
        inputs.customQuantityUnit.addEventListener('input', updateLabels);
        inputs.customTimeUnit.addEventListener('input', updateLabels);
    </script>
</body>
</html>